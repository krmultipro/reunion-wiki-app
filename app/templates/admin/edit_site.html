{% extends "base.html" %}

{% block seo_title %}{{ page_title }} - Réunion Wiki{% endblock %}
{% block seo_description %}{{ subtitle or "Interface de modération Réunion Wiki." }}{% endblock %}

{% block content %}
<section class="admin-card">
  <header class="admin-card__header">
    <div>
      <h1>{{ page_title }}</h1>
      {% if subtitle %}
      <p>{{ subtitle|safe }}</p>
      {% endif %}
    </div>
    {% set sort_by = sort_by|default('date_ajout') %}
    {% set sort_order = sort_order|default('desc') %}
    {% set category_filter = category_filter|default('') %}
    <a class="btn btn-secondary" href="{{ url_for('admin.dashboard', status=status_filter, category=category_filter, q=search_query, sort_by=sort_by, sort_order=sort_order) }}">
      ← Retour au tableau de bord
    </a>
  </header>

  <form method="post" action="{{ form_action }}" class="admin-form" novalidate>
    {{ form.hidden_tag() }}

    <div class="admin-form__field">
      {{ form.nom.label(class_="admin-form__label") }}
      {{ form.nom(class_="admin-form__input") }}
      {% for error in form.nom.errors %}
      <span class="admin-form__error">{{ error }}</span>
      {% endfor %}
    </div>

    <div class="admin-form__field">
      {{ form.lien.label(class_="admin-form__label") }}
      {{ form.lien(class_="admin-form__input") }}
      {% for error in form.lien.errors %}
      <span class="admin-form__error">{{ error }}</span>
      {% endfor %}
    </div>

    <div class="admin-form__group">
      <div class="admin-form__field">
        {{ form.categorie.label(class_="admin-form__label") }}
        {{ form.categorie(class_="admin-form__input") }}
        {% for error in form.categorie.errors %}
        <span class="admin-form__error">{{ error }}</span>
        {% endfor %}
      </div>
      <div class="admin-form__field">
        {{ form.ville.label(class_="admin-form__label") }}
        {{ form.ville(class_="admin-form__input") }}
        {% for error in form.ville.errors %}
        <span class="admin-form__error">{{ error }}</span>
        {% endfor %}
      </div>
    </div>

    <div class="admin-form__field">
      {{ form.description.label(class_="admin-form__label") }}
      {{ form.description(class_="admin-form__textarea", rows="5") }}
      {% for error in form.description.errors %}
      <span class="admin-form__error">{{ error }}</span>
      {% endfor %}
    </div>

    <div class="admin-form__actions">
      <button type="submit" class="btn btn-primary">{{ submit_label }}</button>
    </div>
  </form>
</section>
{% endblock %}
